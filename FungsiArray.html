<!DOCTYPE html>
<html>
<head>
    <title>Sistem Manajemen Toko Interaktif</title>
    <style>
        body {
            font-family: 'Arial Narrow', Arial, sans-serif;
            background-color: #fce4ec;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            color: #444;
        }
        .container {
            width: 90vw;
            max-width: 1000px;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            margin: 20px 0;
        }
        h2 {
            color: #c2185b;
            text-align: center;
            margin-bottom: 20px;
        }
        .form-container, .order-form-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 30px;
        }
        .form-group {
            flex: 1;
            min-width: 200px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #e91e63;
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #f8bbd0;
            border-radius: 5px;
            box-sizing: border-box;
            background-color: #fce4ec;
        }
        .form-actions {
            flex-basis: 100%;
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        .btn-primary {
            background-color: #e91e63;
            color: #fff;
        }
        .btn-primary:hover {
            background-color: #c2185b;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        thead tr {
            background-color: #e91e63;
            color: #ffffff;
            text-align: center;
        }
        th, td {
            padding: 15px 12px;
            border: 1px solid #f8bbd0;
            text-align: left;
        }
        tbody tr:nth-of-type(even) {
            background-color: #f8bbd0;
        }
        tbody tr:last-of-type {
            border-bottom: 2px solid #e91e63;
        }
        tbody td:first-child,
        tbody td:nth-child(2),
        tbody td:last-child {
            text-align: center;
        }
        .action-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin: 2px;
        }
        .btn-edit {
            background-color: #ffb74d;
            color: #fff;
        }
        .btn-delete {
            background-color: #e57373;
            color: #fff;
        }
        .footer {
            width: 100%;
            background-color: #e91e63;
            color: #fff;
            text-align: center;
            padding: 20px 0;
            margin-top: auto;
        }
        .order-summary {
            margin-top: 20px;
            padding: 15px;
            border: 2px solid #e91e63;
            border-radius: 8px;
            background-color: #f8bbd0;
        }
    </style>
</head>
<body>

    <div class="container">
        <h2>Manajemen Produk</h2>
        
        <form id="productForm" class="form-container">
            <input type="hidden" id="productId">
            <div class="form-group">
                <label for="productName">Nama Produk:</label>
                <input type="text" id="productName" required>
            </div>
            <div class="form-group">
                <label for="productPrice">Harga:</label>
                <input type="number" id="productPrice" min="0" required>
            </div>
            <div class="form-group">
                <label for="productStock">Stok:</label>
                <input type="number" id="productStock" min="0" required>
            </div>
            <div class="form-actions">
                <button type="submit" id="submitBtn" class="btn btn-primary">Tambah Produk</button>
                <button type="button" id="cancelBtn" class="btn btn-primary" style="display:none;">Batal</button>
            </div>
        </form>

        <div id="produk-table-container"></div>
    </div>

    <div class="container">
        <h2>Buat Pesanan Baru</h2>
        <form id="orderForm" class="order-form-container">
            <div class="form-group">
                <label for="customerNameInput">Nama Pelanggan:</label>
                <input type="text" id="customerNameInput" required>
            </div>
            <div class="form-group">
                <label for="productOrderSelect">Pilih Produk:</label>
                <select id="productOrderSelect" required></select>
            </div>
            <div class="form-group">
                <label for="orderQuantity">Kuantitas:</label>
                <input type="number" id="orderQuantity" min="1" required>
            </div>
            <div class="form-actions">
                <button type="submit" class="btn btn-primary">Buat Pesanan</button>
            </div>
        </form>
    </div>

    <div class="container">
        <h2>Daftar Pesanan</h2>
        <div id="orders-container"></div>
    </div>

    <script>
        let produkToko = [
            {id: 1, nama: "Laptop", harga: 7000000, stok: 5},
            {id: 2, nama: "Mouse", harga: 200000, stok: 10},
            {id: 3, nama: "Keyboard", harga: 350000, stok: 7}
        ];

        let pesananToko = [];

        const productForm = document.getElementById('productForm');
        const productIdInput = document.getElementById('productId');
        const productNameInput = document.getElementById('productName');
        const productPriceInput = document.getElementById('productPrice');
        const productStockInput = document.getElementById('productStock');
        const submitBtn = document.getElementById('submitBtn');
        const cancelBtn = document.getElementById('cancelBtn');

        const orderForm = document.getElementById('orderForm');
        const customerNameInput = document.getElementById('customerNameInput');
        const productOrderSelect = document.getElementById('productOrderSelect');
        const orderQuantityInput = document.getElementById('orderQuantity');
        const ordersContainer = document.getElementById('orders-container');

        // Fungsi Produk
        function tampilkanProduk() {
            let html = `
            <table>
                <thead>
                    <tr>
                        <th>No</th>
                        <th>ID</th>
                        <th>Nama Produk</th>
                        <th>Harga</th>
                        <th>Stok</th>
                        <th>Aksi</th>
                    </tr>
                </thead>
                <tbody>`;
            if (produkToko.length === 0) {
                html += `<tr><td colspan='6' style="text-align:center;">Tidak ada produk yang tersedia.</td></tr>`;
            } else {
                produkToko.forEach((produk, index) => {
                    html += `<tr>
                        <td>${index + 1}</td>
                        <td>${produk.id}</td>
                        <td>${produk.nama}</td>
                        <td>Rp${produk.harga.toLocaleString('id-ID')}</td>
                        <td>${produk.stok}</td>
                        <td>
                            <button class="action-btn btn-edit" onclick="editProduk(${produk.id})">Edit</button>
                            <button class="action-btn btn-delete" onclick="hapusProduk(${produk.id})">Hapus</button>
                        </td>
                    </tr>`;
                });
            }
            html += `</tbody></table>`;
            document.getElementById('produk-table-container').innerHTML = html;
        }

        function hapusProduk(id) {
            const indexProduk = produkToko.findIndex(produk => produk.id === id);
            if (indexProduk !== -1) {
                produkToko.splice(indexProduk, 1);
                console.log(`Produk dengan ID ${id} berhasil dihapus.`);
                tampilkanProduk();
                populateProductDropdown();
            }
        }

        function editProduk(id) {
            const produk = produkToko.find(p => p.id === id);
            if (produk) {
                productIdInput.value = produk.id;
                productNameInput.value = produk.nama;
                productPriceInput.value = produk.harga;
                productStockInput.value = produk.stok;
                submitBtn.innerText = 'Update Produk';
                cancelBtn.style.display = 'inline-block';
            }
        }
        
        productForm.addEventListener('submit', function(event) {
            event.preventDefault();
            
            const id = productIdInput.value;
            const nama = productNameInput.value;
            const harga = parseInt(productPriceInput.value);
            const stok = parseInt(productStockInput.value);

            if (id) {
                const produk = produkToko.find(p => p.id == id);
                produk.nama = nama;
                produk.harga = harga;
                produk.stok = stok;
            } else {
                const newId = produkToko.length > 0 ? produkToko[produkToko.length - 1].id + 1 : 1;
                const produkBaru = {id: newId, nama: nama, harga: harga, stok: stok};
                produkToko.push(produkBaru);
            }

            productForm.reset();
            productIdInput.value = '';
            submitBtn.innerText = 'Tambah Produk';
            cancelBtn.style.display = 'none';
            tampilkanProduk();
            populateProductDropdown();
        });

        cancelBtn.addEventListener('click', function() {
            productForm.reset();
            productIdInput.value = '';
            submitBtn.innerText = 'Tambah Produk';
            cancelBtn.style.display = 'none';
        });

        // Fungsi Pesanan
        function populateProductDropdown() {
            productOrderSelect.innerHTML = produkToko.map(p => `<option value="${p.id}">${p.nama} (Stok: ${p.stok})</option>`).join('');
        }

        orderForm.addEventListener('submit', function(event) {
            event.preventDefault();
            const customerName = customerNameInput.value;
            const productId = parseInt(productOrderSelect.value);
            const kuantitas = parseInt(orderQuantityInput.value);

            const produk = produkToko.find(p => p.id === productId);

            if (!produk || produk.stok < kuantitas) {
                alert('Stok tidak mencukupi atau produk tidak valid.');
                return;
            }

            const totalHarga = produk.harga * kuantitas;
            const newOrderId = pesananToko.length > 0 ? pesananToko[pesananToko.length - 1].id + 1 : 1;

            const pesananBaru = {
                id: newOrderId,
                namaPelanggan: customerName,
                produkId: productId,
                kuantitas: kuantitas,
                totalHarga: totalHarga,
                tanggal: new Date().toLocaleDateString('id-ID')
            };
            pesananToko.push(pesananBaru);

            produk.stok -= kuantitas;

            alert('Pesanan berhasil dibuat!');
            orderForm.reset();
            tampilkanProduk();
            tampilkanPesanan();
        });

        function tampilkanPesanan() {
            ordersContainer.innerHTML = '';
            if (pesananToko.length === 0) {
                ordersContainer.innerHTML = '<p style="text-align:center;">Tidak ada pesanan yang tercatat.</p>';
                return;
            }

            pesananToko.forEach(pesanan => {
                const produk = produkToko.find(p => p.id === pesanan.produkId);
                const pesananElement = document.createElement('div');
                pesananElement.className = 'order-summary';
                pesananElement.innerHTML = `
                    <p><strong>ID Pesanan:</strong> ${pesanan.id}</p>
                    <p><strong>Pelanggan:</strong> ${pesanan.namaPelanggan}</p>
                    <p><strong>Tanggal:</strong> ${pesanan.tanggal}</p>
                    <p><strong>Produk:</strong> ${produk ? produk.nama : 'Tidak Dikenal'} (${pesanan.kuantitas}x)</p>
                    <p><strong>Total Pembayaran:</strong> Rp${pesanan.totalHarga.toLocaleString('id-ID')}</p>
                `;
                ordersContainer.appendChild(pesananElement);
            });
        }

        // Jalankan fungsi awal saat halaman dimuat
        tampilkanProduk();
        populateProductDropdown();
        tampilkanPesanan();
    </script>
    
    <div class="footer">
        <p>&copy; 2025 Sistem Manajemen Toko <br>
            Dibuat oleh Aisyah Salsabila Azzahrah FWD1</p>
    </div>

</body>
</html>